<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=, initial-scale=1.0">
        <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <title>Carnes Condoys</title>
</head>
<body>
    <nav class="navbar">
        <div class="logo">Daniel Babativa, Julian Molina</div>
    </nav>
    <h1></h1>
    <button class="toggle-btn">‚ò∞</button>
<div class="sidebar">
    <ul class="menu">
        <li><a href="/">Inicio</a></li>
        <li><a href="prediccion">Predicci√≥n</a></li>
        <li><a href="etiquetas">Historial de etiquetas</a></li>
    </ul>

    <div class="logout-section">
    {% if current_user.is_authenticated %}
        <a href="{{ url_for('logout') }}" class="btn-logout">Cerrar Sesi√≥n</a>
    {% else %}
        <a href="{{ url_for('login') }}" class="btn-logout">Iniciar Sesi√≥n</a>
    {% endif %}
</div>
</div>
    <script>
        const toggleBtn = document.querySelector('.toggle-btn');
        const sidebar = document.querySelector('.sidebar');

    toggleBtn.addEventListener('click', () => {
        sidebar.classList.toggle('active');
    });
    </script>

    <h1>Predicci√≥n de Fecha de Vencimiento</h1>
<form action="/prediccion" method="POST">

    <label for="fecha_corte">Fecha de corte:</label>
    <input type="date" name="fecha_corte" required><br>

    <label for="tipo_carne">Tipo de carne:</label>
    <select name="tipo_carne" required>
    <option value="Cabra">Cabra</option>
</select>
<br>
    <label for="productos">Productos utilizados:</label>
    <select name="productos" required>
    <option value="Sal">Sal</option>
    <option value="Vinagre">Vinagre</option>
    <option value="Condimentos">Condimentos</option>
</select>
<br>
    <label for="empaque">Tipo de empaque:</label>
    <select name="empaque" required>
    <option value="Vac√≠o">Vac√≠o</option>
    <option value="Atm√≥sfera modificada">Atm√≥sfera modificada</option>
</select>
<br>
    <button type="submit">Genera etiqueta</button>
</form>

{% if ruta_imagen %}
    <h3>Etiqueta generada</h3>
    <div id="etiqueta-imprimible" class="Sticker">
    <img src="{{ url_for('static', filename='img/etiqueta_generada.png') }}" alt="Etiqueta generada" style="width:300px;">
    </div>

    <button onclick="imprimirEtiqueta()">üñ®Imprimir </button>
{% endif %}

<script>
    function imprimirEtiqueta() {
    const contenido = document.getElementById('etiqueta-imprimible').outerHTML;
    const ventana = window.open('', '', 'height=800,width=1000');
    ventana.document.write(`
        <html>
        <head>
            <title>Sticker</title>
            <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
        </head>
        <body>
            ${contenido}
        </body>
        </html>
    `);
    ventana.document.close();
    ventana.focus();
    ventana.print();
    ventana.close();
    }

</script>
<div id="chatbot-toggle">
    üí¨
</div>

<div class="chatbot" id="chatbot-box" style="display: none;">
    <div id="chatbot-header">Asistente Virtual</div>

    <div id="chatbot-messages"></div>

    <div id="chatbot-input-area">
        <input type="text" id="chatbot-input" placeholder="Escribe tu mensaje...">
        <button id="chatbot-send">Enviar</button>
    </div>
</div>

<script src="{{ url_for('static', filename='js/chatbot.js') }}"></script>
<script>
document.getElementById("chatbot-toggle").addEventListener("click", function () {
    const box = document.getElementById("chatbot-box");

    if (box.classList.contains("active")) {
        box.classList.remove("active");
        setTimeout(() => box.style.display = "none", 200);
    } else {
        box.style.display = "flex";
        setTimeout(() => box.classList.add("active"), 10);
    }
});
</script>

</body>
</html>
